# change prefix
set -g prefix C-q

# vim-style pane resize
bind -r h resize-pane -L 5
bind -r j resize-pane -D 5
bind -r k resize-pane -U 5
bind -r l resize-pane -R 5

# bindings
bind c new-window -c '#{pane_current_path}'
bind '"' split-window -c '#{pane_current_path}'
bind '%' split-window -h -c '#{pane_current_path}'
bind r source ~/.tmux.conf

bind-key C-a last-window

# behaviors
set -g base-index 1
setw -g aggressive-resize on
set-option -g allow-rename off
# setw -g mouse on

# layouts
set -g status-bg black
set -g status-fg white

prefix='#{?client_prefix,#[bg=cyan]#[fg=white]^Q#[bg=default]#[fg=white],  }'

set -g status-left-length 20
set -g status-left "$prefix#[fg=green]#S#[fg=default]#[bg=default] "
# sync to .thymerc: tmux_theme
set -g status-right "#(cat ~/.thyme-tmux)⚡️ #{battery_percentage}  #[fg=black,bg=blue] #[bg=blue,fg=white] %Y-%m-%d %H:%M "
set -g status-interval 1

status_color="#{?window_bell_flag,red,#{?window_active,blue,black}}"
status_prefix="#[bg=$status_color]#[fg=#{status-bg}]#[fg=default]"
status_postfix="#[bg=black]#[fg=$status_color]"
status_format="$status_prefix #[bg=$status_color]#I: #W $status_postfix"
setw -g window-status-separator ""
setw -g window-status-format "$status_format"
setw -g window-status-last-style underscore
setw -g window-status-current-format "$status_format"

# resurrect
set -g @resurrect-capture-pane-contents 'on'
set -g @continuum-restore 'on'

# list of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'christoomey/vim-tmux-navigator'
#set -g @plugin 'tmux-plugins/tmux-resurrect'
#set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'tmux-plugins/tmux-battery'

run '~/.tmux/plugins/tpm/tpm'